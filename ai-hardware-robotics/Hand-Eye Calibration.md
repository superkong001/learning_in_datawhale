## æ‰‹çœ¼æ ‡å®šçš„å®šä¹‰

æ‰‹çœ¼æ ‡å®šï¼ˆHand-Eye Calibrationï¼‰æ˜¯æœºå™¨äººè§†è§‰åº”ç”¨ä¸­çš„ä¸€ä¸ªåŸºç¡€ä¸”å…³é”®çš„é—®é¢˜ï¼Œä¸»è¦ç”¨äºç»Ÿä¸€è§†è§‰ç³»ç»Ÿä¸æœºå™¨äººçš„åæ ‡ç³»ï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ç¡®å®šæ‘„åƒå¤´ä¸æœºå™¨äººçš„ç›¸å¯¹å§¿æ€å…³ç³»ã€‚

> å½“æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨è§†è§‰å¼•å¯¼æœºå™¨äººå»æŠ“å–ç‰©ä½“æ—¶ï¼Œéœ€è¦çŸ¥é“ä¸‰ä¸ªç›¸å¯¹ä½ç½®å…³ç³»ï¼Œå³
> 
> 1. æœ«ç«¯æ‰§è¡Œå™¨ä¸æœºå™¨äººåº•åº§ä¹‹é—´ç›¸å¯¹ä½ç½®å…³ç³»
> 2. æ‘„åƒå¤´ä¸æœ«ç«¯æ‰§è¡Œå™¨ä¹‹é—´ç›¸å¯¹ä½ç½®å…³ç³»
> 3. ç‰©ä½“ä¸æ‘„åƒå¤´ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å’Œæ–¹å‘
> 
> æ‰‹çœ¼æ ‡å®šä¸»è¦è§£å†³å…¶ä¸­ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå³ç¡®å®šâ€œæ‰‹â€ä¸å®‰è£…åœ¨å…¶ä¸Šâ€œçœ¼â€ä¹‹é—´çš„ç©ºé—´å˜æ¢å…³ç³»ï¼Œå³æ±‚è§£ç›¸æœºåæ ‡ç³»å’Œæœºå™¨äººåæ ‡ç³»ä¹‹é—´çš„å˜æ¢çŸ©é˜µã€‚  è¿™é‡Œçš„æœºå™¨äººæœ«ç«¯æ‰§è¡Œå™¨ç§°ä¸ºæ‰‹ï¼Œæ‘„åƒå¤´ç§°ä¸ºçœ¼ã€‚

æ ¹æ®æ‘„åƒå¤´å®‰è£…æ–¹å¼çš„ä¸åŒï¼Œæ‰‹çœ¼æ ‡å®šåˆ†ä¸ºä¸¤ç§å½¢å¼ï¼š
1. æ‘„åƒå¤´å®‰è£…åœ¨æœºæ¢°æ‰‹æœ«ç«¯ï¼Œç§°ä¹‹ä¸ºçœ¼åœ¨æ‰‹ä¸Šï¼ˆEye in handï¼‰
2. æ‘„åƒå¤´å®‰è£…åœ¨æœºæ¢°è‡‚å¤–çš„æœºå™¨äººåº•åº§ä¸Šï¼Œåˆ™ç§°ä¹‹ä¸ºçœ¼åœ¨æ‰‹å¤–ï¼ˆEye to handï¼‰

![1990c1350e8a97d48b571af7b48c04b0_6_image_0_raw=true](https://github.com/user-attachments/assets/1ae6a904-31c0-4207-84c3-91291fb19d98)

## æ‰‹çœ¼æ ‡å®šçš„æ•°å­¦æ¨¡å‹

ä¸ç®¡æ˜¯çœ¼åœ¨æ‰‹ä¸Šè¿˜æ˜¯çœ¼åœ¨æ‰‹å¤–ï¼Œå®ƒä»¬æ±‚è§£çš„æ•°å­¦æ–¹ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œæ‰‹çœ¼æ ‡å®šçš„æ ¸å¿ƒæ–¹ç¨‹éƒ½ä¸º $AH = HB$ ã€‚

å®ƒè¡¨ç¤ºï¼šå½“æœºæ¢°è‡‚ä»ä¸€ä¸ªå§¿æ€ A å˜åˆ°å¦ä¸€ä¸ªå§¿æ€ B æ—¶ï¼Œç›¸æœºçœ‹åˆ°çš„æ ‡å®šæ¿çš„å˜åŒ–ä¹Ÿä¼šå‘ç”Ÿå¯¹åº”çš„å˜åŒ–ã€‚ä¹Ÿå°±æ˜¯æœºæ¢°è‡‚åŠ¨å¤šå°‘ï¼Œç›¸æœºçœ‹åˆ°çš„ç‰©ä½“ä¹Ÿè¦åŠ¨ç›¸åº”çš„é‡ã€‚æ‰‹çœ¼æ ‡å®šçš„ç›®æ ‡ï¼Œå°±æ˜¯æ±‚å‡ºè¿™ä¸­é—´å›ºå®šçš„â€œå˜æ¢å…³ç³»â€ $ğ» = T^e_c$ 

- ğ´ï¼šæœºæ¢°è‡‚æœ«ç«¯æ‰§è¡Œå™¨åœ¨ä¸¤æ¬¡æ‹æ‘„é—´çš„ä½å§¿å˜åŒ–ï¼›
- ğµï¼šæ ‡å®šæ¿åœ¨ç›¸æœºè§†è§’ä¸‹çš„å˜åŒ–ï¼›
- ğ»ï¼šç›¸æœºä¸æœºæ¢°è‡‚æœ«ç«¯ä¹‹é—´çš„å›ºå®šå…³ç³»ï¼ˆè¿™æ˜¯è¦æ ‡å®šçš„ç›®æ ‡ï¼‰ã€‚

é¦–å…ˆå®šä¹‰å¦‚ä¸‹åæ ‡ç³»ï¼š

$F_b$: **åŸºåº§åæ ‡ç³»**(Base Frame)ï¼Œå›ºå®šåœ¨æœºæ¢°è‡‚çš„åº•åº§ä¸Šï¼Œæ˜¯æœºæ¢°è‡‚è¿åŠ¨çš„å…¨å±€å‚è€ƒåæ ‡ç³»ã€‚

$F_e$: **æœ«ç«¯æ‰§è¡Œå™¨åæ ‡ç³»**(End-Effector Frame)ï¼Œå›ºå®šåœ¨æœºæ¢°è‡‚æœ«ç«¯ï¼Œæ¯”å¦‚æœºæ¢°çˆªã€å·¥å…·å°–ç«¯ç­‰ã€‚

$F_c$: **ç›¸æœºåæ ‡ç³»**ï¼ˆCamera Frameï¼‰ï¼Œå›ºå®šåœ¨ç›¸æœºå…‰å¿ƒå¤„ï¼Œç”¨äºè§†è§‰æ„ŸçŸ¥çš„åæ ‡ç³»ã€‚

$F_t$: **æ ‡å®šç›®æ ‡åæ ‡ç³»**ï¼ˆCalibration Target Frameï¼‰ï¼Œå›ºå®šåœ¨æ ‡å®šç›®æ ‡ï¼ˆå¦‚æ£‹ç›˜æ ¼ã€åœ†ç‚¹æ¿ï¼‰ä¸Šã€‚

åæ ‡ç³»ä¹‹é—´çš„å…³ç³»é€šå¸¸ç”¨é½æ¬¡å˜æ¢çŸ©é˜µï¼ˆåˆšä½“å˜æ¢ï¼‰Tè¡¨ç¤ºï¼š

$$
T^i_j =
\begin{bmatrix}
R^i_j & t^i_j \\
0 & 1
\end{bmatrix}
$$

å…¶ä¸­ï¼š
- $R^i_j$ ï¼š3Ã—3 æ—‹è½¬çŸ©é˜µï¼Œæè¿°åæ ‡ç³» j ç›¸å¯¹äº i çš„æ—‹è½¬ï¼›
- $t^i_j$ ï¼š3Ã—1 å¹³ç§»å‘é‡ï¼Œæè¿°åæ ‡ç³» j ç›¸å¯¹äº i çš„å¹³ç§»ï¼›
- $ğ‘–,ğ‘—$ ï¼šåˆ†åˆ«ä»£è¡¨èµ·ç‚¹ä¸ç»ˆç‚¹åæ ‡ç³»ã€‚
- $R âˆˆ SO(3)$ æ—‹è½¬çŸ©é˜µ(3x3)
- $t âˆˆ R^{3}$ å¹³ç§»å‘é‡

Tçš„ä¸Šä¸‹æ ‡è¡¨ç¤ºå˜æ¢æ˜¯å¯¹äºå“ªä¸¤ä¸ªåæ ‡ç³»ï¼Œä¾‹å¦‚ï¼š
- $T^e_c$ï¼šè¡¨ç¤ºå°†ç›¸æœºåæ ‡ç³»è½¬æ¢åˆ°æœ«ç«¯æ‰§è¡Œå™¨åæ ‡ç³»çš„å˜æ¢ï¼Œä¹Ÿè¡¨ç¤ºç›¸æœºåœ¨æœ«ç«¯æ‰§è¡Œå™¨åæ ‡ç³»ä¸‹çš„ä½å§¿ï¼Œåœ¨çœ¼åœ¨æ‰‹ä¸Šè¿™ç§æƒ…å½¢ä¸‹ï¼Œå°±æ˜¯è¦æ±‚çš„ç›®æ ‡çŸ©é˜µã€‚

åœ¨ä»»æ„æ—¶åˆ» ğ‘˜ ï¼Œå››ä¸ªåæ ‡ç³»é—´çš„å‡ ä½•å…³ç³»ä¸ºï¼š $T^b_t=T^b_eT^e_cT^c_t$ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ ‡å®šæ¿ï¼ˆç›®æ ‡ï¼‰åœ¨åŸºåº§åæ ‡ç³»ä¸‹çš„ä½ç½®ï¼Œå¯ä»¥ç”±ä»¥ä¸‹ä¸‰æ®µå˜æ¢ç»„åˆå¾—åˆ°ã€‚

| æ¨¡å‹                    | ç›¸æœºä½ç½®                | ç›¸æœºæ˜¯å¦éšæœºæ¢°è‡‚ä¸€èµ·åŠ¨  | ä¸¾ä¾‹åœºæ™¯            |
| --------------------- | ------------------- | ------------ | --------------- |
| **Eye-in-Handï¼ˆæ‰‹çœ¼åˆä¸€ï¼‰** | ç›¸æœºå®‰è£…åœ¨æœºæ¢°è‡‚æœ«ç«¯          | âœ… ç›¸æœºä¼šéšç€æœºæ¢°è‡‚è¿åŠ¨ | å·¥ä¸šæŠ“å–æœºå™¨äººã€ç„Šæ¥æœºå™¨äºº   |
| **Eye-to-Handï¼ˆæ‰‹çœ¼åˆ†ç¦»ï¼‰** | ç›¸æœºå›ºå®šåœ¨å¤–éƒ¨ç¯å¢ƒä¸­ï¼ˆå¦‚ä¸‰è„šæ¶ã€å¢™å£ï¼‰ | âŒ ç›¸æœºä¸åŠ¨       | ç”Ÿäº§çº¿æ£€æµ‹ã€å›ºå®šç›¸æœºç›‘æ§æŠ“å–åŒº |

### Eye In Hand æ¨å¯¼æ ¸å¿ƒæ–¹ç¨‹ï¼ˆDerivation of the Core Equationï¼‰

å½“ç›¸æœºå›ºå®šåœ¨æœºæ¢°è‡‚æœ«ç«¯æ—¶ï¼Œç›¸æœºä¸æœ«ç«¯æ‰§è¡Œå™¨ä¹‹é—´çš„å˜æ¢æ˜¯å›ºå®šçš„è¿›è¡Œè¯¥ç±»æ‰‹çœ¼æ ‡å®šæ—¶ï¼Œä¼šå°†æ ‡å®šæ¿å›ºå®šåœ¨ä¸€å¤„ï¼Œç„¶åæ§åˆ¶æœºæ¢°è‡‚ç§»åŠ¨åˆ°ä¸åŒä½ç½®ï¼Œä½¿ç”¨æœºæ¢°è‡‚ä¸Šå›ºå®šçš„ç›¸æœºï¼Œåœ¨ä¸åŒä½ç½®å¯¹æ ‡å®šæ¿æ‹ç…§ï¼Œæ‹æ‘„å¤šç»„ä¸åŒä½ç½®ä¸‹æ ‡å®šæ¿çš„ç…§ç‰‡ã€‚

![09ccdf1018bf828fa6cb4f57816131b9_6_image_1_raw=true](https://github.com/user-attachments/assets/c19e3d68-2856-4cf8-9bf1-f3eb051ae72c)

å½“æœºæ¢°è‡‚ä»å§¿æ€ 1 ç§»åŠ¨åˆ°å§¿æ€ 2 æ—¶ï¼Œåˆ†åˆ«è®°å½•ä¸¤æ¬¡çš„ä½å§¿ï¼š

$$
(T^b_{e1}, T^{c1}_t)
(T^b_{e2}, T^{c2}_t)
$$

ç”±äºæ ‡å®šæ¿ä¸æœºå™¨äººåº•åº§æ˜¯å›ºå®šçš„ï¼ŒäºŒè€…ä¹‹é—´ç›¸å¯¹ä½å§¿å…³ç³»ä¸å˜ï¼Œç”±å‡ ä½•å…³ç³»åˆ™æœ‰ï¼š

$$T^b_t = T^b_{e1}T^{e1}_{c1}T^{c1}_{t} = T^b_{e2}T^{e2}_{c2}T^{c2}_{t}$$

| ç¬¦å·                | å«ä¹‰                         | è¯´æ˜                |
| ----------------- | -------------------------- | ----------------- |
|  $(T^b_{e1})$        | æœ«ç«¯æ‰§è¡Œå™¨åœ¨â€œå§¿æ€1â€æ—¶çš„ä½å§¿ï¼ˆä»æœ«ç«¯åˆ°åŸºåº§çš„å˜æ¢ï¼‰ | æŠŠæœ«ç«¯åæ ‡ç³»ä¸‹çš„ç‚¹å˜æ¢åˆ°åŸºåº§åæ ‡ç³» |
|  $(T^b_{e2})$        | æœ«ç«¯æ‰§è¡Œå™¨åœ¨â€œå§¿æ€2â€æ—¶çš„ä½å§¿            | åŒä¸Š                |
|  $((T^b_{e2})^{-1})$ | ä»â€œåŸºåº§â€åˆ°â€œæœ«ç«¯2â€çš„é€†å˜æ¢            | å³æœ«ç«¯2åæ ‡ç³»ç›¸å¯¹äºåŸºåº§çš„å˜æ¢   |
|  $(T^{e}_c)$         | ç›¸æœºç›¸å¯¹äºæœ«ç«¯æ‰§è¡Œå™¨çš„å›ºå®šå˜æ¢            | æ˜¯æˆ‘ä»¬è¦æ ‡å®šçš„â€œæ‰‹çœ¼çŸ©é˜µâ€     |

å…¶ä¸­ $(T^b_{e2})^{-1} T^b_{e1} T^{e}_c$ ç­‰ä»·äºï¼š

å…ˆä»ç›¸æœºåæ ‡ç³»å‡ºå‘ï¼ˆåœ¨å§¿æ€1æ—¶ï¼‰ï¼Œ
- â†’ è½¬åˆ°æœ«ç«¯1åæ ‡ç³»ï¼ˆé€šè¿‡ $T^{e}_c$ ï¼‰ï¼Œ
- â†’ å†ä»æœ«ç«¯1è½¬åˆ°åŸºåº§åæ ‡ç³»ï¼ˆé€šè¿‡ $T^{e1}_b$ ï¼‰ï¼Œ
- â†’ æœ€åä»åŸºåº§è½¬å›æœ«ç«¯2åæ ‡ç³»ï¼ˆé€šè¿‡ $(T^b_{e2})^{-1}$ ï¼‰ã€‚

ç”±äº $T^e_c$ æ˜¯å›ºå®šçš„ï¼ˆç›¸æœºå›ºå®šå®‰è£…åœ¨æœ«ç«¯ï¼‰ï¼Œå³ $T^{e1}_c = T^{e2}_c = T^e_c$ ï¼Œå› æ­¤å®šä¹‰ï¼š

- æœ«ç«¯çš„ç›¸å¯¹è¿åŠ¨ï¼š
  $A=T^{e2}_ {e1}=(T^b_ {e2})^{-1}T^b_ {e1}$
- ç›®æ ‡åœ¨ç›¸æœºä¸‹çš„ç›¸å¯¹è¿åŠ¨ï¼š
  $B=T^{c2}_ {c1}=T^{c2}_ t (T^{c1}_ t)^{-1}$
- å¸¸é‡åˆšä½“ï¼šç›¸æœºåˆšæ€§å®‰è£…åœ¨æœ«ç«¯
  $H=T^{e1}_c=T^{e2}_c=T^e_c$ 

å¯¹ä¸Šè¿°ç­‰å¼è¿›è¡Œå˜æ¢ï¼š

$$
\begin{align*}
T^b_{e1} T^{e}_ {c} T^{c1}_ t 
&= T^b_ {e2} T^{e}_ {c} T^{c2}_ t \\
(T^b_ {e2})^{-1}T^b_ {e1}T^{e1}_ {c1}T^{c1}_ {t} 
&=T^{e2}_ {c2}T^{c2}_ {t} \\
(T^b_ {e2})^{-1}T^b_ {e1}T^{e1}_ {c1} 
&=T^{e2}_ {c2}T^{c2}_ {t}(T^{c1}_ {t})^{-1} \\
T^{e2}_ {e1}T^{e1}_ {c1} 
&=T^{e2}_ {c2}T^{c2}_ {c1} \\
T^{e2}_ {e1}T^{e}_ {c} 
&=T^{e}_ {c}T^{c2}_ {c1} \\
\Rightarrow \quad A H &= H B
\end{align*}
$$

å…¶ä¸­ $T^e_c$ å°±æ˜¯æœ€ç»ˆéœ€è¦æ±‚è§£çš„ $H$ ã€‚

### Eye To Hand

å½“ç›¸æœºå›ºå®šåœ¨æœºæ¢°è‡‚ä»¥å¤–æ—¶ï¼Œç›¸æœºä¸æœ«ç«¯æ‰§è¡Œå™¨çš„ç›¸å¯¹ä½ç½®ä¼šéšç€æœºæ¢°è‡‚çš„è¿åŠ¨è€Œæ”¹å˜ã€‚è¿›è¡Œè¯¥ç±»æ‰‹çœ¼æ ‡å®šæ—¶ï¼Œä¼šå°†æ ‡å®šæ¿å›ºå®šåœ¨æœºæ¢°è‡‚æœ«ç«¯ï¼Œç„¶åæ§åˆ¶æœºæ¢°è‡‚æ‹¿ç€æ ‡å®šæ¿ï¼Œå›´ç»•ç€å›ºå®šçš„ç›¸æœºæ‹ç…§ã€‚ä¸ºäº†æ±‚è§£çš„å‡†ç¡®æ€§ï¼Œä¸€èˆ¬éœ€è¦æ‹æ‘„å¤šäº10ç»„çš„ç…§ç‰‡ã€‚

![3e06961ddbc9c5469e4361deab822e8f_6_image_2_raw=true](https://github.com/user-attachments/assets/4ef59887-b71e-49f0-a9a1-31c053fa91b5)

ç”±äºæ­¤æ—¶æ ‡å®šæ¿æ˜¯å›ºå®šåœ¨æœºæ¢°è‡‚æœ«ç«¯çš„ï¼ŒäºŒè€…ç›¸å¯¹ä½ç½®åœ¨æ‹æ‘„ä¸åŒç…§ç‰‡æ—¶å€¼ä¸å˜ï¼Œæ‰€ä»¥æœ‰ï¼š

$$T^e_t = T^{e1}_ bT^{b}_ {c}T^{c}_ {t} = T^{e2}_ bT^{b}_ {c}T^{c}_ {t}$$

å®šä¹‰ï¼š
- $A = T^b_ {e2}T^{e1}_ b$    ï¼ˆæœ«ç«¯ç›¸å¯¹äºåŸºåº§çš„ç›¸å¯¹è¿åŠ¨ï¼‰
- $B = T^{c}_ {t2}T^{t1}_ c$    ï¼ˆç›¸æœºè§†è§’ä¸‹ç›®æ ‡çš„ç›¸å¯¹è¿åŠ¨ï¼‰
- $X = T^b_ c$                        ï¼ˆç›¸æœºä¸åŸºåº§ä¹‹é—´çš„å›ºå®šå…³ç³»ï¼‰

$$ 
\begin{align*}
T^{e1}_ bT^{b}_ {c}T^{c}_ {t1} 
&= T^{e2}_ bT^{b}_ {c}T^{c}_ {t2} \\
(T^{e2}_ b)^{-1}T^{e1}_ bT^{b}_ {c}T^{c}_ {t1} 
&= T^{b}_ {c}T^{c}_ {t2} \\
(T^{e2}_ b)^{-1}T^{e1}_ bT^{b}_ {c} 
&= T^{b}_ {c}T^{c}_ {t2}(T^{c}_ {t1})^{-1} \\
(T^b_ {e2}T^{e1}_ b)T^{b}_ {c} 
&= T^{b}_ {c}(T^{c}_ {t2}T^{t1}_ c) \\
\Rightarrow \quad A X &= X B
\end{align*}
$$

## æ±‚è§£ $AH = HB$ 

$AH = HB$ æ±‚è§£æ–¹æ³•ï¼Œç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯åˆ†æ­¥è§£æ³•ï¼Œå³å°†æ–¹ç¨‹ç»„è¿›è¡Œåˆ†è§£ï¼Œç„¶ååˆ©ç”¨æ—‹è½¬çŸ©é˜µçš„æ€§è´¨ï¼Œå…ˆæ±‚è§£å‡ºæ—‹è½¬ï¼Œç„¶åå°†æ—‹è½¬çš„è§£ä»£å…¥å¹³ç§»æ±‚è§£ä¸­ï¼Œå†æ±‚å‡ºå¹³ç§»éƒ¨åˆ†ã€‚

å¸¸è§çš„ä¸¤æ­¥ç»å…¸ç®—æ³•æœ‰å°†æ—‹è½¬çŸ©é˜µè½¬ä¸ºæ—‹è½¬å‘é‡æ±‚è§£çš„Tsai-Lenzæ–¹æ³•ï¼ŒåŸºäºæ—‹è½¬çŸ©é˜µæç¾¤æ€§è´¨ï¼ˆæç¾¤çš„ä¼´éšæ€§è´¨ï¼‰è¿›è¡Œæ±‚è§£çš„Parkæ–¹æ³•ç­‰ã€‚

### Parkæ–¹æ³•æ±‚è§£æ—‹è½¬

1. æ‰‹çœ¼æ ‡å®šçš„åŸºæœ¬æ–¹ç¨‹

æ‰‹çœ¼æ ‡å®šé—®é¢˜çš„å‡ ä½•å…³ç³»å¯ä»¥è¡¨ç¤ºä¸ºï¼š

$$
A X = X B
$$

å…¶ä¸­ï¼Œ $A, B, X \in SE(3)$ ï¼Œå‡ä¸ºé½æ¬¡å˜æ¢çŸ©é˜µï¼›æ¯ä¸ªçŸ©é˜µç”±æ—‹è½¬çŸ©é˜µ ğ‘… å’Œå¹³ç§»å‘é‡ ğ‘¡ æ„æˆã€‚

$$
H =
\begin{bmatrix}
R & t \\
0 & 1
\end{bmatrix},
\quad R \in SO(3),\; t \in \mathbb{R}^3
$$

åˆ†åˆ«è¡¨ç¤ºæ—‹è½¬å’Œå¹³ç§»ã€‚å°† $A, B, X$ å±•å¼€ï¼š

$$
A =
\begin{bmatrix}
R_A & t_A\\
0 & 1
\end{bmatrix},
\quad
B =
\begin{bmatrix}
R_B & t_B\\
0 & 1
\end{bmatrix},
\quad
X =
\begin{bmatrix}
R_X & t_X\\
0 & 1
\end{bmatrix}.
$$

åŸæ–¹ç¨‹ä¸‰ä¸ªå˜é‡å‡ä¸ºé½æ¬¡å˜æ¢çŸ©é˜µï¼ˆhomogeneous transformationï¼šå°†æ—‹è½¬å’Œå¹³ç§»å˜æ¢å†™åœ¨ä¸€ä¸ª4x4çš„çŸ©é˜µä¸­ï¼‰ï¼Œè¡¨ç¤ºä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„å˜æ¢ã€‚

2. å±•å¼€æ–¹ç¨‹å¹¶åˆ†è§£æ—‹è½¬å’Œå¹³ç§»éƒ¨åˆ†

å°†ä¸Šè¿°å½¢å¼ä»£å…¥ $A X = X B$ ï¼š

$$
\begin{align*}
\begin{bmatrix}
R_A & t_A\\
0 & 1
\end{bmatrix}
\begin{bmatrix}
R_X & t_X\\
0 & 1
\end{bmatrix}
&=
\begin{bmatrix}
R_X & t_X\\
0 & 1
\end{bmatrix}
\begin{bmatrix}
R_B & t_B\\
0 & 1
\end{bmatrix} \\
\Rightarrow \quad
\begin{bmatrix}
R_A R_X & R_A t_X + t_A\\
0 & 1
\end{bmatrix}
&=
\begin{bmatrix}
R_X R_B & R_X t_B + t_X\\
0 & 1
\end{bmatrix}
\end{align*}
$$

ç”±æ­¤å¾—åˆ°ä¸¤ç»„ç‹¬ç«‹æ–¹ç¨‹ï¼š

$$
\begin{align*}
R_A R_X &= R_X R_B \quad &(\text{æ—‹è½¬éƒ¨åˆ†}) \\
R_A t_X + t_A &= R_X t_B + t_X \quad &(\text{å¹³ç§»éƒ¨åˆ†})
\end{align*}
$$

3. æ—‹è½¬éƒ¨åˆ†çš„å…±è½­å…³ç³»

å¯¹æ—‹è½¬çŸ©é˜µéƒ¨åˆ†è¿›è¡Œæ•´ç†ï¼š

$$
\begin{align*}
R_A R_X &= R_X R_B \\
\Rightarrow \quad R_A &= R_X R_B R_X^{-1}
\end{align*}
$$

è¯´æ˜ $R_A$ ä¸ $R_B$ ä¸ºç›¸ä¼¼å˜æ¢ï¼ˆå…±è½­å…³ç³»ï¼‰ï¼Œ
å³å®ƒä»¬å…±äº«åŒä¸€æ—‹è½¬è½´ï¼Œä½†è§’åº¦ä¸åŒã€‚

4. æç¾¤ä¸æä»£æ•°è¡¨ç¤º

æ—‹è½¬çŸ©é˜µå±äºæç¾¤ $SO(3)$ ï¼Œ
å…¶æä»£æ•° $so(3)$ æ˜¯ä¸€ä¸ªä¸‰ç»´æ¬§å¼ç©ºé—´ï¼Œ
æ—‹è½¬çŸ©é˜µä¸æ—‹è½¬å‘é‡çš„å…³ç³»ä¸ºï¼š

$$
R = \exp(\phi^\wedge)
$$

å…¶ä¸­ $\phi^\wedge$ è¡¨ç¤ºåå¯¹ç§°çŸ©é˜µï¼š

$$
\phi^\wedge =
\begin{bmatrix}
0 & -\phi_3 & \phi_2\\
\phi_3 & 0 & -\phi_1\\
-\phi_2 & \phi_1 & 0
\end{bmatrix}.
$$

å› æ­¤ï¼Œæ—‹è½¬çŸ©é˜µä¸æ—‹è½¬å‘é‡é€šè¿‡æŒ‡æ•°æ˜ å°„ä¸å¯¹æ•°æ˜ å°„äº’ç›¸è½¬æ¢ã€‚

5. å˜æ¢åˆ°æä»£æ•°ç©ºé—´

å°†æ—‹è½¬æ–¹ç¨‹ $R_A R_X = R_X R_B$ å†™æˆæŒ‡æ•°å½¢å¼ï¼š

$$
\exp(\alpha^\wedge)\exp(x^\wedge)
= \exp(x^\wedge)\exp(\beta^\wedge)
$$

æ ¹æ®æç¾¤çš„å…±è½­æ€§è´¨ï¼š

$$
\exp(\alpha^\wedge)
= \exp(x^\wedge)\exp(\beta^\wedge)\exp(-x^\wedge)
= \exp((R_X \beta)^\wedge)
$$

å› æ­¤å¯å¾—ï¼š

$$
\boxed{\alpha = R_X \beta}
$$

å³åœ¨æ—‹è½¬å‘é‡ç©ºé—´ä¸­ï¼Œ
$A$ çš„æä»£æ•°å‘é‡ç­‰äº $R_X$ ä½œç”¨äº $B$ çš„æä»£æ•°å‘é‡ã€‚

6. å¤šç»„å§¿æ€ä¸‹çš„æœ€å°äºŒä¹˜ä¼°è®¡

å¯¹äºå¤šç»„è§‚æµ‹ $(A_i, B_i)$ ï¼Œæœ‰ï¼š

$$
\alpha_i = R_X \beta_i
$$

ç›®æ ‡æ˜¯æœ€å°åŒ–è¯¯å·®ï¼š

$$
\min_{R_X} \sum_{i=1}^k \| R_X \beta_i - \alpha_i \|^2
$$

è¿™æ˜¯ä¸€ä¸ªä¸‰ç»´ç‚¹äº‘åˆšä½“å¯¹é½é—®é¢˜ã€‚

å®šä¹‰çŸ©é˜µï¼š

$$
M = \sum_{i=1}^k \beta_i \alpha_i^T
$$

å…¶æœ€ä¼˜è§£ä¸ºï¼š

$$
R_X = U V^T,
\quad \text{å…¶ä¸­ } M = U \Sigma V^T
$$

ç­‰ä»·å†™æ³•ï¼š

$$
R_X = (M^T M)^{-\frac{1}{2}} M^T
$$

7. å¹³ç§»éƒ¨åˆ†çš„è§£

å›åˆ°å¹³ç§»æ–¹ç¨‹ï¼š

$$
R_A t_X + t_A = R_X t_B + t_X
$$

åŒ–ç®€ä¸ºï¼š

$$
(R_A - I)t_X = R_X t_B - t_A
$$

å½“å­˜åœ¨å¤šç»„å§¿æ€æ—¶ï¼Œåˆ©ç”¨æœ€å°äºŒä¹˜æ³•æ±‚è§£ï¼š

$$
t_X =
\left(\sum_i (R_{Ai}-I)^T(R_{Ai}-I)\right)^{-1}
\left(\sum_i (R_{Ai}-I)^T(R_X t_{Bi}-t_{Ai})\right)
$$

8. æœ€ç»ˆç»“æœ

$$
X =
\begin{bmatrix}
R_X & t_X\\
0 & 1
\end{bmatrix}
$$

åŸæ–¹ç¨‹è¿›è¡Œå˜æ¢ï¼š

$$
AH  = HB \\
\begin{array}{l}
\left[\begin{array}{cc}
\theta_{A} & b_{A} \\
0 & 1
\end{array}\right]\left[\begin{array}{cc}
\theta_{X} & b_{X} \\
0 & 1
\end{array}\right]  =\left[\begin{array}{cc}
\theta_{X} & b_{X} \\
0 & 1
\end{array}\right]\left[\begin{array}{cc}
\theta_{B} & b_{B} \\
0 & 1
\end{array}\right]\\
\end{array}
$$

æ‰€ä»¥æœ‰ï¼ˆä¹˜ç§¯ç»“æœæ—‹è½¬ä¸å¹³ç§»éƒ¨åˆ†å¯¹åº”ä½ç½®ç›¸ç­‰ï¼‰ï¼š

$$
\begin{aligned}
\theta_{A} \theta_{X} & =\theta_{X} \theta_{B} \\
\theta_{A} b_{X}+b_{A} & =\theta_{X} b_{B}+b_{X}
\end{aligned}
$$

é¦–å…ˆæ±‚è§£ç¬¬ä¸€ä¸ªåªåŒ…å«æ—‹è½¬çŸ©é˜µçš„æ–¹ç¨‹ã€‚

$$
\begin{aligned}
\theta_{A} \theta_{X}  =\theta_{X} \theta_{B} \\
\theta_{A}  =\theta_{X} \theta_{B} \theta_{X}^T 
\end{aligned}
$$

æ—‹è½¬çŸ©é˜µä¸ºSO3ç¾¤ï¼ŒSO3ç¾¤ä¸ºæç¾¤ï¼Œæ¯ä¸€ä¸ªæç¾¤éƒ½æœ‰å¯¹åº”çš„æä»£æ•°ï¼Œå…¶æä»£æ•°å¤„äºä½ç»´çš„æ¬§å¼ç©ºé—´ï¼ˆçº¿æ€§ç©ºé—´ï¼‰ï¼Œæ˜¯æç¾¤å±€éƒ¨å¼€åŸŸçš„åˆ‡ç©ºé—´è¡¨ç¤ºï¼Œæç¾¤ä¸æä»£æ•°å¯ä»¥é€šè¿‡æŒ‡æ•°æ˜ å°„ä¸å¯¹æ•°æ˜ å°„ç›¸äº’è½¬æ¢ï¼š

![4e3bb1be12b047a43c05806404948432_6_image_3_raw=true](https://github.com/user-attachments/assets/fcdc720c-b9ea-4717-a4b8-7a63b1ff386a)

å¯¹äºæ—‹è½¬çŸ©é˜µRï¼Œä¸å¯¹åº”çš„æä»£æ•°**Î¦ **å˜æ¢å…³ç³»å¯ä»¥å¦‚ä¸‹è¡¨ç¤ºï¼š

$R = \exp(Î¦^{\wedge}) = \exp [Î¦]$

å…¶ä¸­[]ç¬¦å·è¡¨ç¤º^æ“ä½œï¼ŒåŠè½¬ä¸ºåå¯¹ç§°çŸ©é˜µï¼Œæˆ–è€…è¯´å‰ç§¯ã€‚

å¯¹äºSO(3)ï¼Œå…¶ä¼´éšæ€§è´¨ä¸ºï¼š

![3838c668f5e8bc2d24ce96ecd1045fda_6_image_3_1_raw=true](https://github.com/user-attachments/assets/6b51b4bc-e957-40aa-9f61-de6d9ee117e2)

$$
\begin{aligned}
\theta_{A}  & =\theta_{X} \theta_{B} \theta_{X}^T \\
\exp [\alpha] & = \theta_{X}\exp [\beta]\theta_{X}^T  \\
\exp [\alpha] & = \exp [\theta_{X}\beta]  \\
\alpha &= \theta_{X}\beta
\end{aligned}
$$

å½“å­˜åœ¨å¤šç»„è§‚æµ‹æ—¶ï¼Œä¸Šè¿°é—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºå¦‚ä¸‹æœ€å°äºŒä¹˜é—®é¢˜ï¼š

![b840125b35f6bc12306073bd6093816a_6_image_3_2_raw=true](https://github.com/user-attachments/assets/93d853bf-287f-4399-b718-cb9dfb5bd2d8)

Î±ä¸Î²ä¸ºå¯¹åº”æ—‹è½¬çš„æä»£æ•°ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸‰ç»´å‘é‡ï¼Œå¯ä»¥çœ‹ä½œä¸€ä¸ªä¸‰ç»´ç‚¹ï¼Œé‚£ä¹ˆä¸Šè¿°é—®é¢˜ç­‰åŒäºä¸€ä¸ªç‚¹äº‘é…å‡†é—®é¢˜ï¼š  

![13ad8648ce9f2aadffc13c6012c95a09_6_image_3_4_1_raw=true](https://github.com/user-attachments/assets/03b0ba18-c12d-4955-aa09-9de4d2bce250)

è¯¥é—®é¢˜æœ‰æœ€å°äºŒä¹˜è§£ä¸ºï¼š  

![b88b4acfd1f4c64dba3e125dae837974_6_image_3_3_raw=true](https://github.com/user-attachments/assets/6f23ac30-f952-417f-8152-0854bd094b5b)

å…¶ä¸­ï¼š  

![84f507ddb5f10f0c5d99ad7f28cf8054_6_image_3_4_raw=true](https://github.com/user-attachments/assets/8d22a27d-2729-496f-94cb-a67300dccd2d)

### Parkæ–¹æ³•æ±‚è§£å¹³ç§»

åœ¨æ±‚è§£å¾—åˆ°æ—‹è½¬çŸ©é˜µåï¼Œå°†æ—‹è½¬çŸ©é˜µå€¼ä»£å…¥ç¬¬äºŒä¸ªæ–¹ç¨‹ï¼š

$$
\begin{aligned}
\theta_{A} b_{X}+b_{A} & =\theta_{X} b_{B}+b_{X} \\
\theta_{A} b_{X} - b_{X} & =\theta_{X} b_{B}- b_{A} \\
(\theta_{A} - I)b_{X}  & =\theta_{X} b_{B}- b_{A} \\
Cb_{X} &= D
\end{aligned}
$$

å…¶ä¸­Cä¸Då‡ä¸ºå·²çŸ¥å€¼ï¼Œç”±äºCä¸ä¸€å®šå¯é€†ï¼ŒåŸæ–¹ç¨‹åšå¦‚ä¸‹å˜æ¢ï¼š  

$$
\begin{aligned}
Cb_{X} &= D \\
C^TCb_{X} &= C^TD \\
b_{X} &= (C^TCX)^{-1}C^TD
\end{aligned}
$$

å³å¯æ±‚å¾—å¹³ç§»éƒ¨åˆ†ã€‚

å½“æœ‰å¤šç»„è§‚æµ‹å€¼æ—¶  

<img width="616" height="68" alt="f2f1e0b9be6bf7d205df0c915c6aa785_6_image_3_5_raw=true" src="https://github.com/user-attachments/assets/1cac07e0-9d34-4c02-b13c-e5eeca849c3b" />

æœ€ç»ˆçš„è§£ä¸ºï¼š 

$$
\begin{aligned}
H = \left[\begin{array}{cc}
\theta_{X} & b_{X} \\
0 & 1
\end{array}\right]
\end{aligned}
$$
